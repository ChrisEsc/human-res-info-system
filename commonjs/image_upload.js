function ImageUpload(profile_id, type) {var imageform = Ext.create('Ext.form.Panel', {width: '100%', bodyPadding: '10 10 0', defaults: {anchor: '100%', allowBlank: false, msgTarget: 'side', labelWidth: 50 }, items: [{xtype: 'fileuploadfield', buttonText: 'Browse', name: 'form-file', id: 'form-file', emptyText: 'Select File..', fieldLabel: 'Files'}], buttons: [{text: 'Upload', icon: './image/upload.png', handler: function(){if(imageform.isValid()){imageform.submit({url: 'commonquery/imageupload', waitMsg: 'Uploading your file...', params: {profile_id: profile_id, type: type}, success: function(form, action) {infoFunction('Status', action.result.data); Ext.getCmp("lblImage").setText('<a href="#" onclick="ImageUpload()"><IMG style="border:1px dashed DarkSlateBlue;" SRC="./profile_pic/'+action.result.imagename+'" height="175" width="175"></a>', false); imageWindow.close(); }, failure: function(form, action) {errorFunction('Error!',action.result.data); } }); } } },{text    : 'Close', icon    : './image/close.png', handler: function () {imageWindow.close(); } }] }); imageWindow = Ext.create('Ext.window.Window', {title       : 'Image Upload Form', closable    : true, modal       : true, width       : 400, autoHeight  : true, resizable   : false, buttonAlign : 'center', header: {titleAlign: 'center'}, items: [imageform] }).show(); }